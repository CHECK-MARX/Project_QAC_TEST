#ifndef _QAC_INCLUDE_source_location
#define _QAC_INCLUDE_source_location

#include <qac_config.h>

#include <cstdint>

__QAC_BEGIN_NAMESPACE

struct source_location
{
  static constexpr source_location current (const uint_least32_t line     = __qacpp_line()
                                          , const uint_least32_t column   = __qacpp_column()
                                          , const char* const    file     = __qacpp_file()
                                          , const char* const    function = __qacpp_function() ) noexcept
  {
    source_location sl {};
    sl.m_line     = line;
    sl.m_column   = column;
    sl.m_file     = file;
    sl.m_function = function;
    return sl;
  }

  constexpr source_location() noexcept = default;

  constexpr uint_least32_t line() const noexcept          { return m_line;     }
  constexpr uint_least32_t column() const noexcept        { return m_column;   }
  constexpr const char*    file_name() const noexcept     { return m_file;     }
  constexpr const char*    function_name() const noexcept { return m_function; }

private:
    uint_least32_t m_line {};
    uint_least32_t m_column {};
    const char*    m_file     = "";
    const char*    m_function = "";
};

__QAC_END_NAMESPACE

#endif
